document.addEventListener('DOMContentLoaded',()=>{initVantaBackground();initMenu();initNavigation();initProjectFilters();initAudioPlayer();initProjectPrompts();initNetlifyForm();initScheduleModal();});function initVantaBackground(){if(window.innerWidth<=1024){document.body.style.backgroundColor='#0A0A0A';return}if(typeof VANTA==='undefined'||typeof THREE==='undefined'){console.error("Vanta.js or Three.js is not loaded.");document.body.style.backgroundColor='#0A0A0A';return}try{VANTA.GLOBE({el:"#vanta-bg",mouseControls:true,touchControls:true,gyroControls:false,minHeight:200.00,minWidth:200.00,scale:1.00,scaleMobile:1.00,color:0x0a0a0a,color2:0xffd700,backgroundColor:0x0a0a0a,size:0.70})}catch(e){console.error("Vanta.js failed to initialize:",e);document.body.style.backgroundColor='#0A0A0A'}}function initMenu(){const menuToggle=document.getElementById('menu-toggle');const mainMenu=document.getElementById('main-menu');const menuContainer=document.getElementById('menu-container');if(!menuToggle||!mainMenu||!menuContainer)return;menuToggle.addEventListener('click',e=>{e.stopPropagation();const isOpen=mainMenu.classList.toggle('is-open');menuToggle.setAttribute('aria-expanded',isOpen)});document.addEventListener('click',e=>{if(mainMenu.classList.contains('is-open')&&!menuContainer.contains(e.target)){mainMenu.classList.remove('is-open');menuToggle.setAttribute('aria-expanded','false')}})}function initNavigation(){const navLinks=document.querySelectorAll('a[data-target]');const mainMenu=document.getElementById('main-menu');const menuToggle=document.getElementById('menu-toggle');navLinks.forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();const targetId=this.dataset.target;const targetSection=document.getElementById(targetId);if(!targetSection)return;const isMobile=window.innerWidth<=1024;if(isMobile){targetSection.scrollIntoView({behavior:'smooth'});if(mainMenu&&mainMenu.classList.contains('is-open')){mainMenu.classList.remove('is-open');menuToggle.setAttribute('aria-expanded','false')}}else{document.querySelector('.page-view.is-active')?.classList.remove('is-active');targetSection.classList.add('is-active');document.querySelector('.menu-item.active')?.classList.remove('active');const newActiveLink=document.querySelector(`#main-menu a[data-target="${targetId}"]`);if(newActiveLink){newActiveLink.classList.add('active')}}})})}function initProjectFilters(){const filterContainer=document.querySelector('.project-filters');if(!filterContainer)return;const projectCards=document.querySelectorAll('.project-card');if(!projectCards.length)return;filterContainer.addEventListener('click',e=>{if(!e.target.matches('button.filter-btn'))return;filterContainer.querySelector('.active')?.classList.remove('active');e.target.classList.add('active');const filter=e.target.dataset.filter;projectCards.forEach(card=>{const cardCategory=card.dataset.category;const shouldShow=(filter==='all'||cardCategory===filter);card.style.display=shouldShow?'block':'none'})})}function initAudioPlayer(){const audioButton=document.querySelector('.audio-player-button');const audio=document.getElementById('background-audio');const buttonIcon=audioButton.querySelector('svg');const buttonText=audioButton.querySelector('span');const logo=document.querySelector('.profile-logo');if(!audioButton||!audio||!logo)return;const playIconPath="M8,5.14V19.14L19,12.14L8,5.14Z";const pauseIconPath="M18,18H6V6H18V18Z";function setAudioState(isPlaying){if(isPlaying){buttonText.textContent='Pause Audio';buttonIcon.innerHTML=`<path d="${pauseIconPath}"></path>`;logo.classList.add('is-glowing')}else{buttonText.textContent='Play Audio';buttonIcon.innerHTML=`<path d="${playIconPath}"></path>`;logo.classList.remove('is-glowing')}}audioButton.addEventListener('click',()=>{if(audio.paused){audio.play();setAudioState(true)}else{audio.pause();setAudioState(false)}});audio.addEventListener('ended',()=>{setAudioState(false)})}function initProjectPrompts(){const projectCards=document.querySelectorAll('.project-card');projectCards.forEach(card=>{card.addEventListener('click',e=>{e.preventDefault();if(card.classList.contains('is-showing-prompt'))return;card.classList.add('is-showing-prompt');setTimeout(()=>{card.classList.remove('is-showing-prompt')},2000)})})}function initNetlifyForm(){const form=document.querySelector('form[name="contact"]');if(!form)return;form.addEventListener("submit",e=>{e.preventDefault();const formData=new FormData(form);const successMessage=document.getElementById('form-success-message');fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(formData).toString(),}).then(()=>{if(form&&successMessage){form.style.display='none';successMessage.style.display='block'}}).catch(error=>alert("There was an error submitting your form. Please try again."))})}function initScheduleModal(){const modalOverlay=document.getElementById('schedule-modal');const openBtn=document.getElementById('schedule-call-btn');const closeBtn=document.getElementById('modal-close-btn');if(!modalOverlay||!openBtn||!closeBtn)return;openBtn.addEventListener('click',e=>{e.preventDefault();modalOverlay.classList.add('is-open')});closeBtn.addEventListener('click',()=>{modalOverlay.classList.remove('is-open')});modalOverlay.addEventListener('click',e=>{if(e.target===modalOverlay){modalOverlay.classList.remove('is-open')}})}